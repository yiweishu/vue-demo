{"version":3,"sources":["webpack:///./src/components/FireAlarmApp/Monitor.vue?207c","webpack:///./src/components/FireAlarmApp/FireAlarmUnit.vue?1316","webpack:///src/components/FireAlarmApp/FireAlarmUnit.vue","webpack:///./src/components/FireAlarmApp/FireAlarmUnit.vue?d0f9","webpack:///./src/components/FireAlarmApp/FireAlarmUnit.vue","webpack:///./src/lib/fc/index.js","webpack:///src/components/FireAlarmApp/Monitor.vue","webpack:///./src/components/FireAlarmApp/Monitor.vue?096a","webpack:///./src/components/FireAlarmApp/Monitor.vue","webpack:///./node_modules/core-js/modules/es6.regexp.flags.js","webpack:///./src/lib/iot/iot.js","webpack:///./node_modules/core-js/modules/es6.regexp.to-string.js","webpack:///./src/components/FireAlarmApp/FireAlarmUnit.vue?199f","webpack:///./src/components/FireAlarmApp/Monitor.vue?422e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","span","_v","_s","productKey","deviceName","active-color","inactive-color","on","change","refresh","model","value","callback","$$v","setSwitch","expression","_l","rowItem","i","key","cowItem","j","deviceData","staticRenderFns","FireAlarmUnitvue_type_template_id_455141bd_scoped_true_render","data","temperature","toFixed","_m","FireAlarmUnitvue_type_template_id_455141bd_scoped_true_staticRenderFns","FireAlarmUnitvue_type_script_lang_js_","name","props","Object","FireAlarmApp_FireAlarmUnitvue_type_script_lang_js_","component","componentNormalizer","options","__file","FireAlarmUnit","a1","callFc","url","params","axios","method","catch","error","response","console","status","statusText","headers","request","message","getFloorCurrentData","fid","then","undefined","forEach","v","CurrentTemperature","parseFloat","SmokeSensorState","PowerSwitch","err","fc","Monitorvue_type_script_lang_js_","iot","beforeMount","_this","r","device","toString","substring","online","Math","random","smokeAlarm","switch","push","deviceList","setInterval","components","FAunit","methods","_this2","ret","length","filter","index","$set","FireAlarmApp_Monitorvue_type_script_lang_js_","Monitor_component","__webpack_exports__","__webpack_require__","flags","f","RegExp","prototype","configurable","get","Buffer","d","D_temp_IoT_IotDemo_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","D_temp_IoT_IotDemo_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","_client_js__WEBPACK_IMPORTED_MODULE_4__","client","iotClient","pk","dn","queryDevicePropertiesData","ProductKey","DeviceName","Identifier.1","Identifier.2","Identifier.3","StartTime","Date","now","EndTime","PageSize","Asc","Success","PropertyDataInfos","PropertyDataInfo","Identifier","List","PropertyInfo","Value","getDeviceStatus","Data","Status","sw","payload","id","floor","version","pub","TopicFullName","concat","MessageContent","JSON","stringify","anObject","$flags","DESCRIPTORS","TO_STRING","$toString","define","fn","call","source","R","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FireAlarmUnit_vue_vue_type_style_index_0_id_455141bd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FireAlarmUnit_vue_vue_type_style_index_0_id_455141bd_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Monitor_vue_vue_type_style_index_0_id_c904c050_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Monitor_vue_vue_type_style_index_0_id_c904c050_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-be9f08aa.87725315.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',[_c('el-row',[_c('el-col',{staticClass:\"col-info\",attrs:{\"span\":12}},[_c('div',[_vm._v(\"productKey: \"+_vm._s(_vm.productKey)+\" / deviceName: \"+_vm._s(_vm.deviceName))])]),_c('el-col',{attrs:{\"span\":12}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{\"change\":_vm.refresh},model:{value:(_vm.setSwitch),callback:function ($$v) {_vm.setSwitch=$$v},expression:\"setSwitch\"}})],1)],1)],1),_c('el-main',[_c('table',_vm._l((_vm.deviceList),function(rowItem,i){return _c('tr',{key:i,staticClass:\"row\"},_vm._l((rowItem),function(cowItem,j){return _c('td',{key:j,staticClass:\"col\"},[_c('FAunit',{attrs:{\"deviceData\":cowItem}})],1)}),0)}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"unit\"},[_c('div',{staticClass:\"data\"},[_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.deviceData.data.temperature.toFixed(2)))]),_vm._m(0)]),_c('div',{staticClass:\"set\"})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"value\"},[_c('span',{staticClass:\"alarm\"},[_c('i',{staticClass:\"el-icon-bell\"})]),_c('span',{staticClass:\"switch\"},[_c('i',{staticClass:\"el-icon-caret-top\"})])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wrapper\">\n    <div class=\"unit\">\n      <div class=\"data\">\n        <div class=\"value\">{{deviceData.data.temperature.toFixed(2)}}</div>\n        <div class=\"value\">\n          <span class=\"alarm\">\n            <i class=\"el-icon-bell\"></i>\n          </span>\n          <span class=\"switch\">\n            <i class=\"el-icon-caret-top\"></i>\n          </span>\n        </div>\n      </div>\n      <div class=\"set\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FireAlarmUnit\",\n  props: {\n    deviceData: Object\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.wrapper {\n  /* background-color: #dd4f8f; */\n  text-align: center;\n}\n\n.unit {\n  background-color: #bee96e;\n  border-radius: 10px;\n  border: 10px solid #1b24ac;\n  color: #333;\n  text-align: center;\n  /* width: auto; */\n  display: inline-block;\n  padding: 0px 15px;\n  margin: 10px;\n}\n.data {\n  font-size: 24px;\n  /* background-color: #bee96e; */\n}\n\n.value {\n  /* height: 30px; */\n}\n.alarm {\n  /* background-color: #bee96e; */\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FireAlarmUnit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FireAlarmUnit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FireAlarmUnit.vue?vue&type=template&id=455141bd&scoped=true&\"\nimport script from \"./FireAlarmUnit.vue?vue&type=script&lang=js&\"\nexport * from \"./FireAlarmUnit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FireAlarmUnit.vue?vue&type=style&index=0&id=455141bd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"455141bd\",\n  null\n  \n)\n\ncomponent.options.__file = \"FireAlarmUnit.vue\"\nexport default component.exports","'use strict';\r\n\r\nimport axios from 'axios';\r\n\r\nexport function a1() {\r\n    return 'a1';\r\n}\r\n\r\nexport function callFc(url, params) {\r\n    return axios({\r\n        method: 'get',\r\n        url: url,\r\n        // headers: { 'Date': '2019-01-07' },   // 前端不需要设置此参数，但是后端需要\r\n        params: params\r\n    })\r\n        .catch(function (error) {\r\n            if (error.response) {\r\n                // The request was made and the server responded with a status code\r\n                // that falls out of the range of 2xx\r\n                console.error('response data: ', error.response.data);\r\n                console.error('response status: ', error.response.status, error.response.statusText);\r\n                console.error('response headers: ', error.response.headers);\r\n            } else if (error.request) {\r\n                // The request was made but no response was received\r\n                // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\r\n                // http.ClientRequest in node.js\r\n                console.error('request: ', error.request);\r\n            } else {\r\n                // Something happened in setting up the request that triggered an Error\r\n                console.error('Error: ', error.message);\r\n            }\r\n            console.error(error);\r\n        });\r\n}\r\n\r\nexport function getFloorCurrentData(fid) {\r\n    var url = 'https://1881220991419025.cn-shanghai.fc.aliyuncs.com/2016-08-15/proxy/FireAlarm/getCurrentData/' + fid;\r\n    // var url = 'http://api.yiiot.top/currentData/' + fid;\r\n\r\n    return callFc(url, {}).then(response => {\r\n        if (response == undefined) return null;\r\n\r\n        // console.info('getFloorCurrentData: ', response);\r\n        if (response.status == 200) {\r\n            response.data.data.forEach((v, i) => {\r\n                v.CurrentTemperature = parseFloat(\r\n                    v.CurrentTemperature\r\n                );\r\n                v.SmokeSensorState = parseFloat(\r\n                    v.SmokeSensorState\r\n                );\r\n                v.PowerSwitch = parseFloat(\r\n                    v.PowerSwitch\r\n                );\r\n            });\r\n\r\n            return response.data;\r\n        }\r\n        else\r\n            return null;\r\n\r\n    }).catch(err => {\r\n        console.error(err);\r\n    });\r\n}\r\n\r\nexport default {\r\n    a1, getFloorCurrentData\r\n}","<template>\n  <el-container>\n    <el-header>\n      <el-row>\n        <el-col :span=\"12\" class=\"col-info\">\n          <div>productKey: {{productKey}} / deviceName: {{deviceName}}</div>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-switch\n            v-model=\"setSwitch\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\"\n            @change=\"refresh\"\n          ></el-switch>\n        </el-col>\n      </el-row>\n    </el-header>\n\n    <el-main>\n      <table>\n        <tr v-for=\"(rowItem, i) in deviceList\" :key=\"i\" class=\"row\">\n          <td v-for=\"(cowItem, j) in rowItem\" :key=\"j\" class=\"col\">\n            <FAunit :deviceData=\"cowItem\"/>\n          </td>\n        </tr>\n      </table>\n    </el-main>\n  </el-container>\n</template>\n\n<script>\nimport FAunit from \"@/components/FireAlarmApp/FireAlarmUnit.vue\";\nimport Iot from \"../../lib/iot/iot.js\";\nimport Fc from \"../../lib/fc\";\n\nvar iot = new Iot();\n\nexport default {\n  beforeMount() {\n    for (var i = 0; i < 5; i++) {\n      var r = [];\n      for (var j = 0; j < 8; j++) {\n        var device = {\n          productKey: \"a1zTwoqIdfD\",\n          deviceName: 'fa_' + ((10000 + i*8+j+1).toString().substring(1, 5)),\n          data: {\n            online: false,\n            temperature: 20 + Math.random(),\n            smokeAlarm: true,\n            switch: false\n          }\n        };\n\n        r.push(device);\n      }\n\n      this.deviceList.push(r);\n    }\n\n    // console.log(this.deviceList);\n\n    setInterval(() => {\n      this.refresh();\n    }, 1000);\n  },\n  data() {\n    return {\n      deviceList: [],\n      // 当前选中的设备\n      deviceName: \"\",\n      productKey: \"\",\n\n      // 设置值\n      setSwitch: true\n    };\n  },\n  components: {\n    FAunit\n  },\n  methods: {\n    // refresh(r, j) {\n    //   var device = r[j];\n\n    //   iot.getDeviceStatus(device.productKey, device.deviceName).then(status => {\n    //     device.data.online = status === \"ONLINE\";\n\n    //     this.$set(r, j, device);\n    //   });\n\n    //   iot\n    //     .getFireAlarmDeviceData(device.productKey, device.deviceName)\n    //     .then(data => {\n    //       device.data.temperature = data.temperature;\n    //       device.data.smokeAlarm = data.smokeAlarm;\n    //       device.data.switch = data.switch;\n\n    //       this.$set(r, j, device);\n    //     });\n    // },\n    refresh() {\n      Fc.getFloorCurrentData('4_3').then(ret => {\n        // console.info(\"refresh: %j\", ret.data);\n\n        for (var i = 0; i < this.deviceList.length; i++) {\n          var r = this.deviceList[i];\n          for (var j = 0; j < r.length; j++) {\n            var device = r[j];\n\n            var data = ret.data.filter((value, index) => {\n              return value.deviceName == device.deviceName;\n            });\n\n            if (data.length > 0) {\n              device.data.temperature = data[0].CurrentTemperature;\n              device.data.smokeAlarm = data[0].SmokeSensorState;\n              device.data.switch = data[0].PowerSwitch;\n\n              this.$set(r, j, device);\n            }\n          }\n        }\n      });\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.el-header {\n  background-color: #b3c0d1;\n  color: #ffffff;\n  line-height: 60px;\n  text-align: right;\n  /* font-size: 12px; */\n}\n.col-info {\n  text-align: left;\n}\na {\n  text-decoration: none;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Monitor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Monitor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Monitor.vue?vue&type=template&id=c904c050&scoped=true&\"\nimport script from \"./Monitor.vue?vue&type=script&lang=js&\"\nexport * from \"./Monitor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Monitor.vue?vue&type=style&index=0&id=c904c050&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c904c050\",\n  null\n  \n)\n\ncomponent.options.__file = \"Monitor.vue\"\nexport default component.exports","// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n","'use strict';\r\n\r\nimport iotClient from \"./client.js\";\r\n\r\nexport default class iot {\r\n    constructor() {\r\n        this.client = new iotClient();\r\n    }\r\n\r\n    getFireAlarmDeviceData(pk, dn) {\r\n        //获取设备属性值\r\n        return this.client.queryDevicePropertiesData({\r\n            ProductKey: pk,\r\n            DeviceName: dn,\r\n            \"Identifier.1\": \"CurrentTemperature\",\r\n            \"Identifier.2\": \"SmokeSensorState\",\r\n            \"Identifier.3\": \"PowerSwitch\",\r\n            StartTime: Date.now(),\r\n            EndTime: Date.now() - 60000,\r\n            PageSize: 1,\r\n            Asc: 0\r\n        })\r\n            .then(response => {\r\n                if (response == undefined) return null;\r\n\r\n                // console.info(response);\r\n                var data = response.data;\r\n                var ret = {\r\n                    temperature: 0,\r\n                    smokeAlarm: false,\r\n                    switch: false\r\n                };\r\n\r\n                if (data.Success) {\r\n                    data.PropertyDataInfos.PropertyDataInfo.forEach((v, i) => {\r\n                        switch (v.Identifier) {\r\n                            case \"CurrentTemperature\":\r\n                                ret.temperature = parseFloat(\r\n                                    v.List.PropertyInfo[0].Value\r\n                                );\r\n                                break;\r\n                            case \"SmokeSensorState\":\r\n                                ret.smokeAlarm =\r\n                                    true == v.List.PropertyInfo[0].Value;\r\n                                break;\r\n                            case \"PowerSwitch\":\r\n                                ret.switch = true == v.List.PropertyInfo[0].Value;\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                return ret;\r\n            })\r\n            .catch(err => {\r\n                console.error(err);\r\n            });\r\n\r\n    }\r\n\r\n    getDeviceStatus(pk, dn) {\r\n        //获取设备状态\r\n        return this.client.getDeviceStatus({\r\n            ProductKey: pk,\r\n            DeviceName: dn\r\n        }).then(response => {\r\n            if (response.data.Success)\r\n                return response.data.Data.Status;\r\n            else\r\n                return 'Error';\r\n        }).catch(err => {\r\n            console.error(err);\r\n        });\r\n\r\n    }\r\n\r\n    setSwitch(pk, dn, sw) {\r\n        var payload = {\r\n            id: Math.floor(Math.random() * (100000 - 100 + 1) + 100),\r\n            version: \"1.0\",\r\n            params: { PowerSwitch: sw },\r\n            method: \"thing.service.property.set\"\r\n        };\r\n\r\n        return this.client.pub({\r\n            ProductKey: pk,\r\n            TopicFullName: `/sys/${pk}/${dn}/thing/service/property/set`,\r\n            MessageContent: new Buffer(JSON.stringify(payload)).toString(\"base64\")\r\n        });\r\n    }\r\n}  ","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FireAlarmUnit.vue?vue&type=style&index=0&id=455141bd&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FireAlarmUnit.vue?vue&type=style&index=0&id=455141bd&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Monitor.vue?vue&type=style&index=0&id=c904c050&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Monitor.vue?vue&type=style&index=0&id=c904c050&scoped=true&lang=css&\""],"sourceRoot":""}