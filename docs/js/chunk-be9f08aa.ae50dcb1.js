(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be9f08aa"],{"171e":function(e,t,r){},"32fc5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",[r("el-row",[r("el-col",{staticClass:"col-info",attrs:{span:12}},[r("div",[e._v("productKey: "+e._s(e.productKey)+" / deviceName: "+e._s(e.deviceName))])]),r("el-col",{attrs:{span:12}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.refresh},model:{value:e.setSwitch,callback:function(t){e.setSwitch=t},expression:"setSwitch"}})],1)],1)],1),r("el-main",[r("table",e._l(e.deviceList,function(t,a){return r("tr",{key:a,staticClass:"row"},e._l(t,function(e,t){return r("td",{key:t,staticClass:"col"},[r("FAunit",{attrs:{deviceData:e}})],1)}),0)}),0)])],1)},n=[],s=(r("6b54"),r("cadf"),r("551c"),r("097d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"unit"},[r("div",{staticClass:"data"},[r("div",{staticClass:"value"},[e._v(e._s(e.deviceData.data.temperature.toFixed(2)))]),e._m(0)]),r("div",{staticClass:"set"})])])}),o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"value"},[r("span",{staticClass:"alarm"},[r("i",{staticClass:"el-icon-bell"})]),r("span",{staticClass:"switch"},[r("i",{staticClass:"el-icon-caret-top"})])])}],c={name:"FireAlarmUnit",props:{deviceData:Object}},i=c,u=(r("6fb2"),r("2877")),l=Object(u["a"])(i,s,o,!1,null,"455141bd",null);l.options.__file="FireAlarmUnit.vue";var f=l.exports,d=r("4b04"),p=(r("ac6a"),r("bc3a")),v=r.n(p);function h(){return"a1"}function m(e,t){return v()({method:"get",url:e,params:t}).catch(function(e){e.response?(console.error("response data: ",e.response.data),console.error("response status: ",e.response.status,e.response.statusText),console.error("response headers: ",e.response.headers)):e.request?console.error("request: ",e.request):console.error("Error: ",e.message),console.error(e)})}function b(e){return m("http://api.yiiot.top/currentData/"+e,{}).then(function(e){return void 0==e?null:200==e.status?(e.data.data.forEach(function(e,t){e.CurrentTemperature=parseFloat(e.CurrentTemperature),e.SmokeSensorState=parseFloat(e.SmokeSensorState),e.PowerSwitch=parseFloat(e.PowerSwitch)}),e.data):null}).catch(function(e){console.error(e)})}var w={a1:h,getFloorCurrentData:b},S=(new d["a"],{beforeMount:function(){for(var e=this,t=0;t<5;t++){for(var r=[],a=0;a<8;a++){var n={productKey:"a1zTwoqIdfD",deviceName:"fa_"+(1e4+8*t+a+1).toString().substring(1,5),data:{online:!1,temperature:20+Math.random(),smokeAlarm:!0,switch:!1}};r.push(n)}this.deviceList.push(r)}setInterval(function(){e.refresh()},1e3)},data:function(){return{deviceList:[],deviceName:"",productKey:"",setSwitch:!0}},components:{FAunit:f},methods:{refresh:function(){var e=this;w.getFloorCurrentData("4_3").then(function(t){for(var r=0;r<e.deviceList.length;r++)for(var a=e.deviceList[r],n=0;n<a.length;n++){var s=a[n],o=t.data.filter(function(e,t){return e.deviceName==s.deviceName});o.length>0&&(s.data.temperature=o[0].CurrentTemperature,s.data.smokeAlarm=o[0].SmokeSensorState,s.data.switch=o[0].PowerSwitch,e.$set(a,n,s))}})}}}),g=S,y=(r("8781"),Object(u["a"])(g,a,n,!1,null,"c904c050",null));y.options.__file="Monitor.vue";t["default"]=y.exports},3846:function(e,t,r){r("9e1e")&&"g"!=/./g.flags&&r("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:r("0bfb")})},"4b04":function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return o});r("6b54"),r("ac6a");var a=r("d4ec"),n=r("bee2"),s=r("8bc4"),o=function(){function t(){Object(a["a"])(this,t),this.client=new s["a"]}return Object(n["a"])(t,[{key:"getFireAlarmDeviceData",value:function(e,t){return this.client.queryDevicePropertiesData({ProductKey:e,DeviceName:t,"Identifier.1":"CurrentTemperature","Identifier.2":"SmokeSensorState","Identifier.3":"PowerSwitch",StartTime:Date.now(),EndTime:Date.now()-6e4,PageSize:1,Asc:0}).then(function(e){if(void 0==e)return null;var t=e.data,r={temperature:0,smokeAlarm:!1,switch:!1};return t.Success&&t.PropertyDataInfos.PropertyDataInfo.forEach(function(e,t){switch(e.Identifier){case"CurrentTemperature":r.temperature=parseFloat(e.List.PropertyInfo[0].Value);break;case"SmokeSensorState":r.smokeAlarm=1==e.List.PropertyInfo[0].Value;break;case"PowerSwitch":r.switch=1==e.List.PropertyInfo[0].Value;break;default:break}}),r}).catch(function(e){console.error(e)})}},{key:"getDeviceStatus",value:function(e,t){return this.client.getDeviceStatus({ProductKey:e,DeviceName:t}).then(function(e){return e.data.Success?e.data.Data.Status:"Error"}).catch(function(e){console.error(e)})}},{key:"setSwitch",value:function(t,r,a){var n={id:Math.floor(99901*Math.random()+100),version:"1.0",params:{PowerSwitch:a},method:"thing.service.property.set"};return this.client.pub({ProductKey:t,TopicFullName:"/sys/".concat(t,"/").concat(r,"/thing/service/property/set"),MessageContent:new e(JSON.stringify(n)).toString("base64")})}}]),t}()}).call(this,r("b639").Buffer)},6397:function(e,t,r){},"6b54":function(e,t,r){"use strict";r("3846");var a=r("cb7c"),n=r("0bfb"),s=r("9e1e"),o="toString",c=/./[o],i=function(e){r("2aba")(RegExp.prototype,o,e,!0)};r("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?i(function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?n.call(e):void 0)}):c.name!=o&&i(function(){return c.call(this)})},"6fb2":function(e,t,r){"use strict";var a=r("171e"),n=r.n(a);n.a},8781:function(e,t,r){"use strict";var a=r("6397"),n=r.n(a);n.a}}]);
//# sourceMappingURL=chunk-be9f08aa.ae50dcb1.js.map