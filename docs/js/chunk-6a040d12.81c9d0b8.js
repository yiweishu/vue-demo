(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a040d12"],{2361:function(e,t,a){"use strict";var c=a("5b42"),n=a.n(c);n.a},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"4b04":function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});a("6b54"),a("ac6a");var c=a("d4ec"),n=a("bee2"),r=a("8bc4"),o=function(){function t(){Object(c["a"])(this,t),this.client=new r["a"]}return Object(n["a"])(t,[{key:"getFireAlarmDeviceData",value:function(e,t){return this.client.queryDevicePropertiesData({ProductKey:e,DeviceName:t,"Identifier.1":"CurrentTemperature","Identifier.2":"SmokeSensorState","Identifier.3":"PowerSwitch",StartTime:Date.now(),EndTime:Date.now()-6e4,PageSize:1,Asc:0}).then(function(e){if(void 0==e)return null;var t=e.data,a={temperature:0,smokeAlarm:!1,switch:!1};return t.Success&&t.PropertyDataInfos.PropertyDataInfo.forEach(function(e,t){switch(e.Identifier){case"CurrentTemperature":a.temperature=parseFloat(e.List.PropertyInfo[0].Value);break;case"SmokeSensorState":a.smokeAlarm=1==e.List.PropertyInfo[0].Value;break;case"PowerSwitch":a.switch=1==e.List.PropertyInfo[0].Value;break;default:break}}),a}).catch(function(e){console.error(e)})}},{key:"getDeviceStatus",value:function(e,t){return this.client.getDeviceStatus({ProductKey:e,DeviceName:t}).then(function(e){return e.data.Success?e.data.Data.Status:"Error"}).catch(function(e){console.error(e)})}},{key:"setSwitch",value:function(t,a,c){var n={id:Math.floor(99901*Math.random()+100),version:"1.0",params:{PowerSwitch:c},method:"thing.service.property.set"};return this.client.pub({ProductKey:t,TopicFullName:"/sys/".concat(t,"/").concat(a,"/thing/service/property/set"),MessageContent:new e(JSON.stringify(n)).toString("base64")})}}]),t}()}).call(this,a("b639").Buffer)},5287:function(e,t,a){},"5b42":function(e,t,a){},"6b54":function(e,t,a){"use strict";a("3846");var c=a("cb7c"),n=a("0bfb"),r=a("9e1e"),o="toString",i=/./[o],s=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?s(function(){var e=c(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?n.call(e):void 0)}):i.name!=o&&s(function(){return i.call(this)})},cdfa:function(e,t,a){"use strict";var c=a("5287"),n=a.n(c);n.a},e013:function(e,t,a){"use strict";a.r(t);var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-row",[a("el-col",{staticClass:"col-info",attrs:{span:12}},[a("div",[e._v("productKey: "+e._s(e.productKey)+" / deviceName: "+e._s(e.deviceName))])]),a("el-col",{attrs:{span:12}},[a("el-checkbox",{model:{value:e.autoRefresh,callback:function(t){e.autoRefresh=t},expression:"autoRefresh"}},[e._v("自动刷新")]),a("span",[e._v("  ")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini",round:""},on:{click:e.onRefresh}},[e._v("刷新")])],1)],1)],1),a("el-main",[a(e.componentType,{tag:"component",attrs:{deviceData:e.deviceData},on:{"set-switch":e.onSetSwitch}})],1)],1)},n=[],r=(a("cadf"),a("551c"),a("097d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",[e._m(0),a("tr",[a("td",{staticClass:"col-head"},[e._v("连接状态：")]),a("td",[e._v(e._s(e.deviceData.online?"在线":"离线"))]),a("td")]),a("tr",[a("td",{staticClass:"col-head"},[e._v("当前温度：")]),a("td",[e._v(e._s(e.deviceData.temperature.toFixed(2)))]),a("td")]),a("tr",[a("td",{staticClass:"col-head"},[e._v("烟感告警：")]),a("td",[e._v(e._s(e.deviceData.smokeAlarm?"有告警":"正常"))]),a("td")]),a("tr",[a("td",{staticClass:"col-head"},[e._v("控制开关：")]),a("td",[e._v(e._s(e.deviceData.switch?"开":"关"))]),a("td",[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.setSwitch},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}})],1)])])}),o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"row-head"},[a("td",{staticClass:"col-head"}),a("td",[e._v("当前值")]),a("td",[e._v("操作")])])}],i={name:"FireAlarmConsole",data:function(){return{switchValue:!1}},props:{deviceData:Object},methods:{setSwitch:function(e){this.$emit("set-switch",e)}}},s=i,u=(a("e5b5"),a("2877")),l=Object(u["a"])(s,r,o,!1,null,"65b97bd3",null);l.options.__file="FireAlarmConsole.vue";var f=l.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-row",[a("el-col",{staticClass:"col-info",attrs:{span:12}},[a("div",[e._v("productKey: "+e._s(e.productKey)+" / deviceName: "+e._s(e.deviceName))])]),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.getData}},[e._v("取数")])],1)],1),a("el-row",[a("el-col",{staticClass:"col-info",attrs:{span:24}},[a("div",[e._v("Info: "+e._s(e.productKey))])])],1)],1)},h=[],v=a("bc3a"),p=a.n(v),m={name:"RGBlightConsole",props:{productKey:String,deviceName:String,deviceData:Object},methods:{getData:function(){p()({method:"get",url:"https://1881220991419025.cn-shanghai.fc.aliyuncs.com/2016-08-15/proxy/IotDemo/fun_http/"}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}}},b=m,w=(a("2361"),Object(u["a"])(b,d,h,!1,null,"86717d1c",null));w.options.__file="RGBlightConsole.vue";var _=w.exports,y=a("4b04"),g=new y["a"],D={name:"Console",data:function(){return{deviceName:"",productKey:"",deviceData:{online:!1,temperature:0,smokeAlarm:!1,switch:!1},autoRefresh:!0}},computed:{componentType:function(){switch(this.productKey){case"a1zTwoqIdfD":case"a1hhfKQy7R8":return f;case"a10DlRLjXYj":return _;default:}}},beforeMount:function(){var e=this;this.deviceName=this.$route.params.dn,this.productKey=this.$route.params.pk,this.timer=setInterval(function(){e.autoRefresh&&e.refresh(e.productKey,e.deviceName)},1e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{onSetSwitch:function(e){g.setSwitch(this.productKey,this.deviceName,e?1:0).then(function(e){if(void 0!=e){var t=e.data;t.Success||console.error("SetSwitch fail: ",t.ErrorMessage)}}).catch(function(e){console.error("onSetSwitch error: %s",e)})},refresh:function(e,t){var a=this;g.getDeviceStatus(e,t).then(function(e){a.deviceData.online="ONLINE"===e}),g.getFireAlarmDeviceData(e,t).then(function(e){a.deviceData.temperature=e.temperature,a.deviceData.smokeAlarm=e.smokeAlarm,a.deviceData.switch=e.switch})},onRefresh:function(){this.refresh(this.productKey,this.deviceName)}},watch:{$route:function(e,t){this.deviceName=e.params.dn,this.productKey=e.params.pk}}},S=D,k=(a("cdfa"),Object(u["a"])(S,c,n,!1,null,"759cfb20",null));k.options.__file="Console.vue";t["default"]=k.exports},e5b5:function(e,t,a){"use strict";var c=a("f42b"),n=a.n(c);n.a},f42b:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6a040d12.81c9d0b8.js.map